<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Document</title>
<!-- 부트스트랩 -->
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr"
	crossorigin="anonymous">

<!-- css -->
<link rel="stylesheet" href="/resources/css/members/mypage.css">

</head>

<body>
	<c:choose>
		<c:when test="${loginId == null}">
			<script>
				alert("로그인 후 이용해주세요.");
				location.href = "/";
			</script>
		</c:when>

		<c:otherwise>
			<div class="container p-0 mt-3">
				<!-- header -->
				<div class="row header">
					<div class="col-12 card mb-3 headercard" style="width: 100%">
						<div class="card-body">
							<h5 class="card-title">님</h5>
							<p class="card-text" style="color: gray">${loginId}</p>
						</div>
					</div>
				</div>

				<!-- 계정 정보 -->
				<div class="card account row">
					<div class="card-body">
						<div
							class="col mb-2 d-flex justify-content-between align-items-center">
							<h5 class="card-title">계정 정보</h5>
							<a href="/members/mypage_update" class="card-link">&gt;</a>
						</div>

						<div class="col d-flex justify-content-between align-items-center">
							<h6 class="card-subtitle mb-2 text-body-secondary">사용자 ID</h6>
							<h6>${loginId}</h6>
						</div>

						<div class="col d-flex justify-content-between align-items-center">
							<h6 class="card-subtitle mb-2 text-body-secondary">전화번호</h6>
							<h6 id="phone"></h6>
						</div>

						<div class="col d-flex justify-content-between align-items-center">
							<h6 class="card-subtitle mb-2 text-body-secondary">이메일 주소</h6>
							<h6 id="email"></h6>
						</div>

						<div class="col d-flex justify-content-between align-items-center">
							<h6 class="card-subtitle mb-2 text-body-secondary">우편번호</h6>
							<h6 id="zipcode"></h6>
						</div>

						<div class="col d-flex justify-content-between align-items-center">
							<h6 class="card-subtitle mb-2 text-body-secondary">주소</h6>
							<h6 id="address1"></h6>
						</div>

						<div class="col d-flex justify-content-between align-items-center">
							<h6 class="card-subtitle mb-2 text-body-secondary">상세 주소</h6>
							<h6 id="address2"></h6>
						</div>

						<div class="col d-flex justify-content-between align-items-center">
							<h6 class="card-subtitle mb-2 text-body-secondary">회원가입한 날짜</h6>
							<h6 id="join_date"></h6>
						</div>

						<div class="col d-flex justify-content-between align-items-center">
							<h6 class="card-subtitle mb-2 text-body-secondary">본인확인</h6>
							<h6>
								본인확인 완료 <img src="/img/check.png" style="height: 18px">
							</h6>
						</div>
					</div>
				</div>

				<div class="row footer mt-4">
					<div class="col d-flex justify-content-center align-items-center">
						<button type="button" id="backBtn">뒤로가기</button>
					</div>
				</div>
			</div>

			<script>
			$(function(){
				$.ajax({
					url:"/members/mypage"
				}).done(resp){
					$("#name").text(resp.name);
	                  $("#phone").text(resp.phone);
	                  $("#email").text(resp.email || "");
	                  $("#zipcode").text(resp.zipcode || "");
	                  $("#address1").text(resp.address1 || "");
	                  $("#address2").text(resp.address2 || "");
	                  $("#join_date").text(resp.join_date);
				}
			})
				$("#backBtn").on("click", function() {
					window.location.href = "/";
				}
			</script>
		</c:otherwise>
	</c:choose>
</body>
</html>